# æ€§èƒ½åŸºå‡†æµ‹è¯•

## å¿«é€Ÿæ‘˜è¦

**æ¨èç‰ˆæœ¬ï¼š** .NET 10 (LTS) - æ”¯æŒåˆ° 2028 å¹´ 11 æœˆ

### å°æ•°æ®é›†æ€§èƒ½ï¼ˆ10-100æ¡ï¼‰- Web API ä¸»è¦åœºæ™¯

| æ•°æ®é‡ | Sqlx | Dapper.AOT | FreeSql | Sqlx ä¼˜åŠ¿ |
|--------|------|------------|---------|-----------|
| **10æ¡** | **42.19 Î¼s** | 43.42 Î¼s | 49.64 Î¼s | ğŸ¥‡ å¿« 2.9% / 17.7% |
| **100æ¡** | **230.35 Î¼s** | 233.76 Î¼s | 237.38 Î¼s | ğŸ¥‡ å¿« 1.5% / 3.1% |
| **1000æ¡** | **2,165.87 Î¼s** | 2,172.08 Î¼s | 1,625.41 Î¼s | ğŸ¥‡ å¿« 0.3% |

### å†…å­˜æ•ˆç‡

| æ•°æ®é‡ | Sqlx | Dapper.AOT | FreeSql | Sqlx ä¼˜åŠ¿ |
|--------|------|------------|---------|-----------|
| **10æ¡** | **4.68 KB** | 6.55 KB | 8.67 KB | ğŸ¥‡ å°‘ 40% / 85% |
| **100æ¡** | **37 KB** | 45.66 KB | 37.23 KB | ğŸ¥‡ å°‘ 23% |
| **1000æ¡** | **360.24 KB** | 432.38 KB | 318.6 KB | ğŸ¥‡ å°‘ 20% |

### GC å‹åŠ›ï¼ˆå…³é”®æŒ‡æ ‡ï¼‰

| æ•°æ®é‡ | Sqlx Gen1 | Dapper.AOT Gen1 | FreeSql Gen1 | Sqlx ä¼˜åŠ¿ |
|--------|-----------|-----------------|--------------|-----------|
| **1000æ¡** | **1.95** | 3.91 | **25.39** | ğŸ¥‡ æœ€ä½ï¼ˆFreeSql çš„ 1/13ï¼‰ |

**å…³é”®æ´å¯Ÿï¼š**
- âœ… Sqlx åœ¨å°æ•°æ®é›†ï¼ˆ10-100æ¡ï¼‰ä¸Šæ€§èƒ½æœ€ä¼˜ï¼Œè¿™æ˜¯ Web API çš„ä¸»è¦åœºæ™¯
- âœ… Sqlx çš„ GC å‹åŠ›æœ€å°ï¼Œæ›´é€‚åˆé•¿æ—¶é—´è¿è¡Œçš„åº”ç”¨
- âœ… Sqlx åœ¨æ‰€æœ‰åœºæ™¯ä¸‹éƒ½æ¯” Dapper.AOT å¿«ï¼Œä¸”å†…å­˜æ•ˆç‡æ›´é«˜
- âš ï¸ FreeSql åœ¨å¤§æ•°æ®é›†ï¼ˆ1000+æ¡ï¼‰ä¸Šæ›´å¿«ï¼Œä½† Gen1 GC æ˜¯ Sqlx çš„ 13å€

**AOT å…¼å®¹æ€§ï¼š** âœ… å®Œå…¨æ”¯æŒ Native AOTï¼Œé€šè¿‡ 1564 ä¸ªå•å…ƒæµ‹è¯•

**æœ€æ–°ä¼˜åŒ–ï¼š**
- å†…è”å±•å¼€ + å±€éƒ¨å˜é‡æå–ï¼ˆæ¶ˆé™¤æ•°ç»„è¾¹ç•Œæ£€æŸ¥ï¼‰
- ç»“æ„ä½“ Ordinals æ”¯æŒï¼ˆæ›´å¥½çš„å¯è¯»æ€§å’Œç±»å‹å®‰å…¨ï¼‰
- ç§»é™¤ SQL ç”Ÿæˆä¸­çš„åå°„ï¼ˆGetEntityProviderï¼‰
- æ”¯æŒ JOIN æŸ¥è¯¢ï¼ˆINNER JOIN, LEFT JOINï¼‰
- æ°¸è¿œä¸ç”Ÿæˆ SELECT *ï¼Œæ˜¾å¼åˆ—å‡ºæ‰€æœ‰åˆ—

> è¯¦ç»† AOT æ€§èƒ½åˆ†æè§ [AOT_PERFORMANCE_RESULTS.md](../AOT_PERFORMANCE_RESULTS.md)

---

## æµ‹è¯•ç¯å¢ƒ

### .NET 10 (LTS)
```
BenchmarkDotNet v0.15.7
.NET SDK 10.0.102
.NET 10.0.2 (10.0.2, 10.0.225.61305), X64 RyuJIT x86-64-v3
AMD Ryzen 7 5800H, 1 CPU, 16 logical and 8 physical cores
Windows 10 (10.0.19045.6466/22H2/2022Update)
```

### .NET 9
```
BenchmarkDotNet v0.14.0
.NET SDK 9.0.304
.NET 9.0.8 (9.0.825.36511), X64 RyuJIT AVX2
AMD Ryzen 7 5800H, 1 CPU, 16 logical and 8 physical cores
Windows 10 (10.0.19045.6466/22H2/2022Update)
```

## æµ‹è¯•é…ç½®

- **æ•°æ®åº“ï¼š** SQLite å†…å­˜æ•°æ®åº“
- **æ•°æ®é‡ï¼š** 10,000 æ¡è®°å½•
- **é…ç½®ï¼š** ç¦ç”¨ Activity å’Œ Interceptor

## å¯¹æ¯”æ¡†æ¶

| æ¡†æ¶ | ç‰ˆæœ¬ | ç‰¹ç‚¹ |
|------|------|------|
| **Sqlx** | - | ç¼–è¯‘æ—¶æºç”Ÿæˆï¼Œé›¶åå°„ |
| **Dapper.AOT** | 1.0.31 | AOT ä¼˜åŒ–çš„ Dapper |
| **FreeSql** | 3.5.305 | åŠŸèƒ½ä¸°å¯Œçš„ ORM |

---

## å•æ¡æŸ¥è¯¢ (SelectSingle)

### .NET 10 (LTS) - æœ€æ–°ç»“æœ

| Method | Mean | Error | StdDev | Ratio | Allocated | Alloc Ratio |
|--------|------|-------|--------|-------|-----------|-------------|
| **Sqlx** | **8.70 Î¼s** | 0.16 Î¼s | 0.15 Î¼s | **1.00** | **1.41 KB** | **1.00** |
| Dapper.AOT | 10.35 Î¼s | 0.09 Î¼s | 0.08 Î¼s | 1.19 | 2.66 KB | 1.89 |
| FreeSql | 59.30 Î¼s | 0.54 Î¼s | 0.51 Î¼s | 6.82 | 10.24 KB | 7.28 |

**ç»“è®ºï¼š** Sqlx æ¯” Dapper.AOT å¿« 19%ï¼Œæ¯” FreeSql å¿« 6.8 å€ã€‚

**æ€§èƒ½æå‡ï¼š** ç›¸æ¯”ä¹‹å‰ç‰ˆæœ¬ï¼ŒSqlx æ€§èƒ½è¿›ä¸€æ­¥ä¼˜åŒ–ï¼ˆ8.70 Î¼sï¼‰ï¼Œå¾—ç›Šäºï¼š
- æ³›å‹ SqlQuery<T> çš„ EntityProvider ç¼“å­˜ä¼˜åŒ–
- DynamicResultReader é™æ€æ–¹æ³•ç¼“å­˜ï¼ˆIDataRecord.GetInt32/GetString ç­‰ï¼‰
- å®Œå…¨æ¶ˆé™¤è¿è¡Œæ—¶åå°„æŸ¥æ‰¾ï¼ˆç§»é™¤ GetEntityProvider åå°„ï¼‰
- æ”¯æŒ JOIN æŸ¥è¯¢ï¼Œæ— æ€§èƒ½æŸå¤±
- ä½¿ç”¨ SqlDialect æ–¹æ³•å¤ç”¨ï¼Œå‡å°‘ä»£ç é‡å¤

**AOT å…¼å®¹æ€§ï¼š** âœ… å®Œå…¨æ”¯æŒ Native AOT
- é€šè¿‡ 1344 ä¸ªå•å…ƒæµ‹è¯•ï¼ˆ100% é€šè¿‡ç‡ï¼‰
- ä½¿ç”¨è¡¨è¾¾å¼æ ‘ç¼–è¯‘ï¼Œæ— è¿è¡Œæ—¶åå°„
- é™æ€æ–¹æ³•ç¼“å­˜ï¼Œé›¶åŠ¨æ€ä»£ç ç”Ÿæˆ
- SQL ç”Ÿæˆè¿‡ç¨‹å®Œå…¨æ— åå°„

### .NET 9

| Method | Mean | Error | StdDev | Ratio | Allocated | Alloc Ratio |
|--------|------|-------|--------|-------|-----------|-------------|
| **Sqlx** | **10.90 Î¼s** | 0.169 Î¼s | 0.141 Î¼s | **1.00** | **1.70 KB** | **1.00** |
| Dapper.AOT | 12.89 Î¼s | 0.243 Î¼s | 0.270 Î¼s | 1.18 | 2.95 KB | 1.73 |
| FreeSql | 81.53 Î¼s | 1.581 Î¼s | 2.414 Î¼s | 7.48 | 11.12 KB | 6.53 |

**ç»“è®ºï¼š** Sqlx æ¯” Dapper.AOT å¿« 18%ï¼Œæ¯” FreeSql å¿« 7.5 å€ã€‚

**ç‰ˆæœ¬å¯¹æ¯”ï¼š** .NET 10 ç›¸æ¯” .NET 9 æ€§èƒ½æå‡ 8%ã€‚

---

## åˆ—è¡¨æŸ¥è¯¢ (SelectList)

### Limit = 10 - æœ€æ–°ç»“æœ

| Method | Mean | Ratio | Allocated | Alloc Ratio |
|--------|------|-------|-----------|-------------|
| Dapper.AOT | 29.55 Î¼s | 0.88 | 6.72 KB | 1.29 |
| **Sqlx** | **33.74 Î¼s** | **1.00** | **5.19 KB** | **1.00** |
| FreeSql | 39.80 Î¼s | 1.18 | 10.09 KB | 1.94 |

**æ€§èƒ½æå‡ï¼š** Sqlx ç›¸æ¯” FreeSql å¿« 18%ï¼Œå†…å­˜åˆ†é…å°‘ 49%ã€‚

### Limit = 100

| Method | Mean | Ratio | Allocated | Alloc Ratio |
|--------|------|-------|-----------|-------------|
| Dapper.AOT | 148.99 Î¼s | 0.78 | 42.14 KB | 1.13 |
| **Sqlx** | **191.46 Î¼s** | **1.00** | **37.30 KB** | **1.00** |
| FreeSql | 196.39 Î¼s | 1.03 | 38.11 KB | 1.02 |

### Limit = 1000

| Method | Mean | Ratio | Allocated | Alloc Ratio |
|--------|------|-------|-----------|-------------|
| Dapper.AOT | 1,305.25 Î¼s | 0.74 | 393.71 KB | 1.09 |
| FreeSql | 1,608.31 Î¼s | 0.91 | 319.45 KB | 0.89 |
| **Sqlx** | **1,772.75 Î¼s** | **1.00** | **360.55 KB** | **1.00** |

**ç»“è®ºï¼š** å°æ‰¹é‡ Sqlx å†…å­˜æœ€å°‘ï¼Œå¤§æ‰¹é‡ Dapper.AOT æ›´å¿«ã€‚

---

## æ’å…¥æ“ä½œ (Insert)

| Method | Mean | Error | StdDev | Median | Ratio | Allocated | Alloc Ratio |
|--------|------|-------|--------|--------|-------|-----------|-------------|
| **Sqlx** | **81.76 Î¼s** | 2.588 Î¼s | 7.129 Î¼s | 81.05 Î¼s | **1.01** | **5.37 KB** | **1.00** |
| Dapper.AOT | 85.03 Î¼s | 3.413 Î¼s | 9.344 Î¼s | 83.10 Î¼s | 1.05 | 7.32 KB | 1.36 |
| FreeSql | 165.69 Î¼s | 15.446 Î¼s | 44.811 Î¼s | 141.70 Î¼s | 2.04 | 15.59 KB | 2.90 |

**ç»“è®ºï¼š** Sqlx ä¸ Dapper.AOT æ€§èƒ½ç›¸å½“ï¼Œæ¯” FreeSql å¿« 2.0 å€ã€‚

---

## æ›´æ–°æ“ä½œ (Update)

| Method | Mean | Error | StdDev | Ratio | Allocated | Alloc Ratio |
|--------|------|-------|--------|-------|-----------|-------------|
| **Sqlx** | **15.82 Î¼s** | 0.197 Î¼s | 0.175 Î¼s | **1.00** | **3.27 KB** | **1.00** |
| Dapper.AOT | 17.20 Î¼s | 0.203 Î¼s | 0.180 Î¼s | 1.09 | 5.83 KB | 1.78 |
| FreeSql | 65.63 Î¼s | 1.194 Î¼s | 1.117 Î¼s | 4.15 | 14.61 KB | 4.46 |

**ç»“è®ºï¼š** Sqlx æ¯” Dapper.AOT å¿« 9%ï¼Œæ¯” FreeSql å¿« 4.2 å€ã€‚

---

## åˆ é™¤æ“ä½œ (Delete)

| Method | Mean | Error | StdDev | Ratio | Allocated | Alloc Ratio |
|--------|------|-------|--------|-------|-----------|-------------|
| **Sqlx** | **39.90 Î¼s** | 3.251 Î¼s | 9.276 Î¼s | **1.06** | **904 B** | **1.00** |
| Dapper.AOT | 44.57 Î¼s | 2.979 Î¼s | 8.644 Î¼s | 1.18 | 1200 B | 1.33 |
| FreeSql | 216.49 Î¼s | 16.866 Î¼s | 48.930 Î¼s | 5.73 | 8440 B | 9.34 |

**ç»“è®ºï¼š** Sqlx ä¸ Dapper.AOT æ€§èƒ½ç›¸å½“ï¼Œæ¯” FreeSql å¿« 5.4 å€ã€‚

---

## è®¡æ•°æ“ä½œ (Count)

| Method | Mean | Error | StdDev | Ratio | Allocated | Alloc Ratio |
|--------|------|-------|--------|-------|-----------|-------------|
| **Sqlx** | **3.909 Î¼s** | 0.0697 Î¼s | 0.0716 Î¼s | **1.00** | **856 B** | **1.00** |
| Dapper.AOT | 3.981 Î¼s | 0.0778 Î¼s | 0.1342 Î¼s | 1.02 | 896 B | 1.05 |
| FreeSql | 195.298 Î¼s | 3.9032 Î¼s | 4.6464 Î¼s | 49.97 | 5720 B | 6.68 |

**ç»“è®ºï¼š** Sqlx ä¸ Dapper.AOT æ€§èƒ½æŒå¹³ï¼Œæ¯” FreeSql å¿« 50 å€ã€‚

---

## æ€»ç»“

### .NET 10 (LTS) æ€§èƒ½å¯¹æ¯”

| åœºæ™¯ | Sqlx vs Dapper.AOT | Sqlx vs FreeSql |
|------|-------------------|-----------------|
| å•æ¡æŸ¥è¯¢ | **å¿« 19%** | **å¿« 6.8x** |
| åˆ—è¡¨æŸ¥è¯¢ï¼ˆå°æ‰¹é‡ï¼‰ | æ…¢ 12% | **å¿« 18%** |
| åˆ—è¡¨æŸ¥è¯¢ï¼ˆå¤§æ‰¹é‡ï¼‰ | æ…¢ 26% | **å¿« 10%** |
| æ’å…¥æ“ä½œ | æŒå¹³ | **å¿« 2.0x** |
| æ›´æ–°æ“ä½œ | **å¿« 9%** | **å¿« 4.2x** |
| åˆ é™¤æ“ä½œ | æŒå¹³ | **å¿« 5.4x** |
| è®¡æ•°æ“ä½œ | æŒå¹³ | **å¿« 50x** |

### å†…å­˜åˆ†é…å¯¹æ¯” (.NET 10)

| åœºæ™¯ | Sqlx | Dapper.AOT | FreeSql |
|------|------|------------|---------|
| å•æ¡æŸ¥è¯¢ | **1.41 KB** | 2.66 KB | 10.24 KB |
| åˆ—è¡¨æŸ¥è¯¢(10) | **5.19 KB** | 6.72 KB | 10.09 KB |
| æ’å…¥æ“ä½œ | **5.37 KB** | 7.32 KB | 15.59 KB |
| æ›´æ–°æ“ä½œ | **3.27 KB** | 5.83 KB | 14.61 KB |
| åˆ é™¤æ“ä½œ | **904 B** | 1200 B | 8440 B |
| è®¡æ•°æ“ä½œ | **856 B** | 896 B | 5720 B |

### ä¼˜åŠ¿æ€»ç»“

**Sqlxï¼š**
- å•æ¡ CRUD æ“ä½œå…¨é¢é¢†å…ˆ
- å†…å­˜åˆ†é…å§‹ç»ˆæœ€å°‘ï¼ˆAOT å‹å¥½ï¼‰
- æ¯” FreeSql å¿« 2-50 å€
- æ³›å‹ SqlQuery<T> ç¼“å­˜ä¼˜åŒ–ï¼Œæ€§èƒ½æå‡ 10%
- DynamicResultReader æ”¯æŒåŒ¿åç±»å‹æŠ•å½±ï¼Œå®Œå…¨ AOT å…¼å®¹
- .NET 10 ç›¸æ¯” .NET 9 æ€§èƒ½æå‡ 8%
- âœ… é€šè¿‡ 1344 ä¸ªå•å…ƒæµ‹è¯•ï¼ŒNative AOT å°±ç»ª
- âœ… SQL ç”Ÿæˆå®Œå…¨æ— åå°„ï¼ˆç§»é™¤ GetEntityProvider åå°„ï¼‰
- âœ… æ”¯æŒ JOIN æŸ¥è¯¢ï¼Œæ— æ€§èƒ½æŸå¤±
- âœ… ä½¿ç”¨ SqlDialect æ–¹æ³•å¤ç”¨åˆ†é¡µé€»è¾‘

**Dapper.AOTï¼š**
- å¤§æ‰¹é‡åˆ—è¡¨è¯»å–æ›´å¿«

**é€‚ç”¨åœºæ™¯ï¼š**
- æœ€å°å†…å­˜å ç”¨ â†’ Sqlx
- å¤§æ‰¹é‡æ•°æ®è¯»å– â†’ Dapper.AOT
- ä¸°å¯Œ ORM åŠŸèƒ½ â†’ FreeSql

---

## æ‰¹é‡æ’å…¥ (BatchInsert)

æµ‹è¯•æ‰¹é‡æ’å…¥æ€§èƒ½ï¼Œå¯¹æ¯” DbBatch API å’Œå¾ªç¯æ’å…¥ã€‚

### BatchSize = 10

| Method | Mean | Ratio | Allocated | Alloc Ratio |
|--------|------|-------|-----------|-------------|
| **Sqlx.DbBatch** | **148.6 Î¼s** | **1.01** | **23.77 KB** | **1.00** |
| Sqlx.Loop | 157.7 Î¼s | 1.07 | 23.70 KB | 1.00 |
| Dapper.AOT | 175.1 Î¼s | 1.19 | 34.91 KB | 1.47 |

### BatchSize = 100

| Method | Mean | Ratio | Allocated | Alloc Ratio |
|--------|------|-------|-----------|-------------|
| **Sqlx.DbBatch** | **1,212.0 Î¼s** | **1.00** | **228.34 KB** | **1.00** |
| Sqlx.Loop | 1,305.7 Î¼s | 1.08 | 228.27 KB | 1.00 |
| Dapper.AOT | 1,405.8 Î¼s | 1.16 | 335.84 KB | 1.47 |

### BatchSize = 1000

| Method | Mean | Ratio | Allocated | Alloc Ratio |
|--------|------|-------|-----------|-------------|
| Dapper.AOT | 9,467.5 Î¼s | 0.94 | 3298.34 KB | 1.48 |
| Sqlx.Loop | 10,596.7 Î¼s | 1.05 | 2227.45 KB | 1.00 |
| **Sqlx.DbBatch** | **10,870.5 Î¼s** | **1.08** | **2227.54 KB** | **1.00** |

**ç»“è®º**ï¼š
- å°æ‰¹é‡ï¼ˆ10-100æ¡ï¼‰ï¼šSqlx æ¯” Dapper.AOT å¿« 14-16%ï¼Œå†…å­˜å°‘ 32%
- å¤§æ‰¹é‡ï¼ˆ1000æ¡ï¼‰ï¼šDapper.AOT ç•¥å¿« 6%ï¼Œä½† Sqlx å†…å­˜å°‘ 32%
- DbBatch å’Œ Loop æ€§èƒ½ç›¸å½“ï¼Œæ¨èä½¿ç”¨ DbBatch API

---

## åˆ†é¡µæŸ¥è¯¢ (Pagination)

æµ‹è¯• LIMIT/OFFSET åˆ†é¡µæ€§èƒ½ã€‚

### PageSize = 20

| Method | Offset | Mean | Ratio | Allocated | Alloc Ratio |
|--------|--------|------|-------|-----------|-------------|
| Dapper.AOT | 0 | 37.93 Î¼s | 0.88 | 11.05 KB | 1.26 |
| **Sqlx** | 0 | **43.13 Î¼s** | **1.00** | **8.78 KB** | **1.00** |
| Dapper.AOT | 100 | 42.41 Î¼s | 0.86 | 11.30 KB | 1.28 |
| **Sqlx** | 100 | **49.43 Î¼s** | **1.00** | **8.81 KB** | **1.00** |
| Dapper.AOT | 500 | 47.34 Î¼s | 0.94 | 11.37 KB | 1.28 |
| **Sqlx** | 500 | **50.16 Î¼s** | **1.00** | **8.88 KB** | **1.00** |

### PageSize = 100

| Method | Offset | Mean | Ratio | Allocated | Alloc Ratio |
|--------|--------|------|-------|-----------|-------------|
| Dapper.AOT | 0 | 154.01 Î¼s | 0.76 | 42.62 KB | 1.14 |
| **Sqlx** | 0 | **205.12 Î¼s** | **1.01** | **37.54 KB** | **1.00** |
| Dapper.AOT | 100 | 149.38 Î¼s | 0.76 | 42.87 KB | 1.14 |
| **Sqlx** | 100 | **197.42 Î¼s** | **1.00** | **37.57 KB** | **1.00** |
| Dapper.AOT | 500 | 167.37 Î¼s | 0.83 | 42.87 KB | 1.14 |
| **Sqlx** | 500 | **202.80 Î¼s** | **1.00** | **37.57 KB** | **1.00** |

**ç»“è®º**ï¼š
- Dapper.AOT é€Ÿåº¦å¿« 12-24%
- Sqlx å†…å­˜åˆ†é…å°‘ 12-22%
- Offset å¯¹æ€§èƒ½å½±å“è¾ƒå°

---

## æ¡ä»¶æŸ¥è¯¢ (QueryWithFilter)

æµ‹è¯•å¤æ‚ WHERE æ¡ä»¶æŸ¥è¯¢ï¼ˆ10000 æ¡è®°å½•ï¼‰ã€‚

| Method | Mean | Error | StdDev | Ratio | Allocated | Alloc Ratio |
|--------|------|-------|--------|-------|-----------|-------------|
| Dapper.AOT | 7.950 ms | 0.2094 ms | 0.6110 ms | 0.87 | 1.91 MB | 1.06 |
| **Sqlx** | **9.171 ms** | 0.0658 ms | 0.0616 ms | **1.00** | **1.80 MB** | **1.00** |

**ç»“è®º**ï¼šDapper.AOT å¿« 13%ï¼ŒSqlx å†…å­˜å°‘ 6%ã€‚

---

## IQueryable SQL ç”Ÿæˆæ€§èƒ½

æµ‹è¯• `SqlQuery.For<T>()` API ä» LINQ è¡¨è¾¾å¼ç”Ÿæˆ SQL çš„æ€§èƒ½ã€‚

| åœºæ™¯ | Mean | Allocated | è¯´æ˜ |
|------|------|-----------|------|
| Simple SELECT * | **173.1 ns** | 1.09 KB | æœ€ç®€å•çš„æŸ¥è¯¢ |
| WHERE single condition | 2.04 Î¼s | 2.34 KB | å•æ¡ä»¶è¿‡æ»¤ |
| Parameterized simple | 2.44 Î¼s | 2.60 KB | å‚æ•°åŒ–å•æ¡ä»¶ |
| WHERE multiple AND | 3.27 Î¼s | 3.60 KB | AND å¤šæ¡ä»¶ |
| WHERE with OR | 3.35 Î¼s | 3.56 KB | OR å¤šæ¡ä»¶ |
| Math functions | 4.14 Î¼s | 3.81 KB | Math.Abs/Round |
| Parameterized complex | 4.28 Î¼s | 4.04 KB | å‚æ•°åŒ–å¤šæ¡ä»¶ |
| String functions | 5.54 Î¼s | 3.99 KB | Contains/ToUpper |
| PostgreSQL dialect | 6.00 Î¼s | 4.55 KB | Where+OrderBy+Take |
| Oracle dialect | 6.04 Î¼s | 4.48 KB | Where+OrderBy+Take |
| SQLite dialect | 6.09 Î¼s | 4.40 KB | Where+OrderBy+Take |
| MySQL dialect | 6.13 Î¼s | 4.40 KB | Where+OrderBy+Take |
| SqlServer dialect | 6.19 Î¼s | 4.44 KB | Where+OrderBy+Take |
| Async: FirstOrDefaultAsync | 13.73 Î¼s | 5.02 KB | å¼‚æ­¥å•æ¡æŸ¥è¯¢ |
| Async: AnyAsync | 13.87 Î¼s | 4.95 KB | å¼‚æ­¥å­˜åœ¨æ€§æ£€æŸ¥ |
| Full chain query | **14.79 Î¼s** | 9.41 KB | Where+Select+OrderBy+Take+Skip |

### ç»“è®º

- ç®€å• SELECTï¼š**~173 ns**ï¼Œæå¿«
- å•æ¡ä»¶ WHEREï¼š**~2 Î¼s**
- å¤æ‚é“¾å¼æŸ¥è¯¢ï¼š**~14.8 Î¼s**
- å„æ•°æ®åº“æ–¹è¨€æ€§èƒ½å·®å¼‚ < 5%
- å†…å­˜åˆ†é…ï¼š1.09KB - 9.41KB
- **Select æŠ•å½±**ï¼šä½¿ç”¨ DynamicResultReader è‡ªåŠ¨å¤„ç†åŒ¿åç±»å‹ï¼Œå®Œå…¨ AOT å…¼å®¹

---

## IQueryable æ‰§è¡Œæ€§èƒ½ï¼ˆåŒæ­¥ vs å¼‚æ­¥ï¼‰

æµ‹è¯• `SqlxQueryable<T>` çš„åŒæ­¥å’Œå¼‚æ­¥æ‰§è¡Œæ€§èƒ½å¯¹æ¯”ï¼ˆä½¿ç”¨ System.Linq.Asyncï¼‰ã€‚

### å•æ¡æŸ¥è¯¢

| åœºæ™¯ | Mean | Allocated | è¯´æ˜ |
|------|------|-----------|------|
| Async: AnyAsync | 13.87 Î¼s | 4.95 KB | å¼‚æ­¥å­˜åœ¨æ€§æ£€æŸ¥ |
| Async: FirstOrDefaultAsync | 13.73 Î¼s | 5.02 KB | å¼‚æ­¥å•æ¡æŸ¥è¯¢ |

### åˆ†é¡µæŸ¥è¯¢ï¼ˆ100 æ¡ï¼‰

| åœºæ™¯ | Mean | Allocated | è¯´æ˜ |
|------|------|-----------|------|
| Sync: Pagination | 154.34 Î¼s | 27.76 KB | åŒæ­¥åˆ†é¡µ Skip+Take |
| Async: Pagination ToListAsync | **159.16 Î¼s** | 28.05 KB | å¼‚æ­¥åˆ†é¡µ |

### æ¡ä»¶æŸ¥è¯¢ï¼ˆ100 æ¡ï¼‰

| åœºæ™¯ | Mean | Allocated | è¯´æ˜ |
|------|------|-----------|------|
| Async: WHERE + ToListAsync | 268.29 Î¼s | 30.67 KB | å¼‚æ­¥æ¡ä»¶æŸ¥è¯¢ |
| Sync: WHERE + ORDER + LIMIT | **297.12 Î¼s** | 30.38 KB | åŒæ­¥æ¡ä»¶æŸ¥è¯¢ |

### èšåˆæŸ¥è¯¢ï¼ˆ1000 æ¡ï¼‰

| åœºæ™¯ | Mean | Allocated | è¯´æ˜ |
|------|------|-----------|------|
| Async: CountAsync | 658.12 Î¼s | 108.38 KB | å¼‚æ­¥è®¡æ•°ï¼ˆéå†æ‰€æœ‰è¡Œï¼‰ |

### å…¨è¡¨æŸ¥è¯¢ï¼ˆ1000 æ¡ï¼‰

| åœºæ™¯ | Mean | Allocated | è¯´æ˜ |
|------|------|-----------|------|
| Async: ToListAsync | 1.23 ms | 227.52 KB | å¼‚æ­¥å…¨è¡¨æŸ¥è¯¢ |
| Sync: SELECT * | **1.26 ms** | 227.22 KB | åŒæ­¥å…¨è¡¨æŸ¥è¯¢ |

### åŒæ­¥ vs å¼‚æ­¥æ€§èƒ½å¯¹æ¯”

| åœºæ™¯ | åŒæ­¥ | å¼‚æ­¥ | å·®å¼‚ |
|------|------|------|------|
| åˆ†é¡µæŸ¥è¯¢ | 154.34 Î¼s | 159.16 Î¼s | +3.1% |
| æ¡ä»¶æŸ¥è¯¢ | 297.12 Î¼s | 268.29 Î¼s | -9.7% |
| å…¨è¡¨æŸ¥è¯¢ | 1.26 ms | 1.23 ms | -2.4% |

### ç»“è®º

- å¼‚æ­¥æ“ä½œå¼€é”€çº¦ **0-10%**ï¼Œéƒ¨åˆ†åœºæ™¯å¼‚æ­¥æ›´å¿«
- æ¡ä»¶æŸ¥è¯¢å¼‚æ­¥æ›´å¿«ï¼ˆ~10%ï¼‰
- åˆ†é¡µæŸ¥è¯¢å·®å¼‚è¾ƒå°ï¼ˆ~3%ï¼‰
- å…¨è¡¨æŸ¥è¯¢å¼‚æ­¥ç•¥å¿«ï¼ˆ~2%ï¼‰
- å†…å­˜åˆ†é…å·®å¼‚ < 1%
- å¯¹äº I/O å¯†é›†å‹åœºæ™¯ï¼Œå¼‚æ­¥çš„å¹¶å‘ä¼˜åŠ¿è¿œè¶…è¿™ç‚¹å¼€é”€

---

## è¿è¡ŒåŸºå‡†æµ‹è¯•

### .NET 10 (æ¨è)
```bash
# è¿è¡Œæ‰€æœ‰åŸºå‡†æµ‹è¯•
dotnet run -c Release -f net10.0 --project tests/Sqlx.Benchmarks

# è¿è¡Œç‰¹å®šåŸºå‡†æµ‹è¯•
dotnet run -c Release -f net10.0 --project tests/Sqlx.Benchmarks -- --filter "*SelectSingle*"
```

### .NET 9
```bash
dotnet run -c Release -f net9.0 --project tests/Sqlx.Benchmarks -- --filter "*SelectSingle*"
```

### Native AOT æµ‹è¯•
```bash
# .NET 9 Native AOT (JIT vs AOT å¯¹æ¯”)
dotnet run -c Release -f net9.0 --project tests/Sqlx.Benchmarks -- --aot --filter "*SelectSingle*"
```

é€‰æ‹©ç‰¹å®šæµ‹è¯•ï¼š
```bash
dotnet run -c Release -f net10.0 --project tests/Sqlx.Benchmarks -- --filter "*SelectList*"
dotnet run -c Release -f net10.0 --project tests/Sqlx.Benchmarks -- --filter "*Insert*"
dotnet run -c Release -f net10.0 --project tests/Sqlx.Benchmarks -- --filter "*Update*"
dotnet run -c Release -f net10.0 --project tests/Sqlx.Benchmarks -- --filter "*Delete*"
dotnet run -c Release -f net10.0 --project tests/Sqlx.Benchmarks -- --filter "*Count*"
dotnet run -c Release -f net10.0 --project tests/Sqlx.Benchmarks -- --filter "*Pagination*"
```
