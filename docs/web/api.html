<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sqlx API æ–‡æ¡£ | å®Œæ•´å‚è€ƒæ‰‹å†Œ</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        .api-section {
            margin: 3rem 0;
            padding: 2rem;
            background: var(--bg-white);
            border: 1px solid var(--border-color);
            border-radius: 12px;
        }

        .api-item {
            margin: 2rem 0;
            padding: 1.5rem;
            border-left: 4px solid var(--primary-color);
            background: var(--bg-light);
        }

        .api-signature {
            font-family: 'Consolas', monospace;
            background: var(--code-bg);
            color: var(--code-text);
            padding: 1rem;
            border-radius: 6px;
            overflow-x: auto;
            margin: 1rem 0;
        }

        .param-table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
        }

        .param-table th,
        .param-table td {
            padding: 0.75rem;
            border: 1px solid var(--border-color);
            text-align: left;
        }

        .param-table th {
            background: var(--bg-light);
            font-weight: 600;
        }
    </style>
</head>
<body>
    <div class="container" style="padding: 2rem;">
        <h1>ğŸ“š Sqlx API å®Œæ•´å‚è€ƒ</h1>
        
        <!-- ç‰¹æ€§ API -->
        <div class="api-section">
            <h2>ğŸ·ï¸ ç‰¹æ€§ (Attributes)</h2>
            
            <div class="api-item">
                <h3>[Sqlx]</h3>
                <p>æ ‡è®°æ–¹æ³•ä½¿ç”¨ SQL æ¨¡æ¿</p>
                <div class="api-signature">
[Sqlx("SELECT {{columns}} FROM {{table}} WHERE id = @id")]
Task&lt;User&gt; GetByIdAsync(int id);
                </div>
                <table class="param-table">
                    <tr>
                        <th>å‚æ•°</th>
                        <th>ç±»å‹</th>
                        <th>è¯´æ˜</th>
                    </tr>
                    <tr>
                        <td>sql</td>
                        <td>string</td>
                        <td>SQLæ¨¡æ¿å­—ç¬¦ä¸²ï¼Œæ”¯æŒå ä½ç¬¦</td>
                    </tr>
                </table>
            </div>

            <div class="api-item">
                <h3>[RepositoryFor]</h3>
                <p>æŒ‡å®šè¦å®ç°çš„æ¥å£ç±»å‹</p>
                <div class="api-signature">
[RepositoryFor(typeof(IUserRepository))]
public partial class UserRepository : IUserRepository
                </div>
            </div>

            <div class="api-item">
                <h3>[SqlDefine]</h3>
                <p>å®šä¹‰æ•°æ®åº“æ–¹è¨€å’Œè¡¨å</p>
                <div class="api-signature">
[SqlDefine(Dialect = SqlDialect.Sqlite, TableName = "users")]
public partial class UserRepository
                </div>
                <table class="param-table">
                    <tr>
                        <th>å±æ€§</th>
                        <th>ç±»å‹</th>
                        <th>è¯´æ˜</th>
                    </tr>
                    <tr>
                        <td>Dialect</td>
                        <td>SqlDialect</td>
                        <td>æ•°æ®åº“ç±»å‹ï¼šSqlite, SqlServer, MySql, PostgreSql, Oracle, DB2</td>
                    </tr>
                    <tr>
                        <td>TableName</td>
                        <td>string</td>
                        <td>è¡¨åï¼ˆå¯é€‰ï¼Œé»˜è®¤ä»ç±»åæ¨æ–­ï¼‰</td>
                    </tr>
                </table>
            </div>

            <div class="api-item">
                <h3>[TableName]</h3>
                <p>ä¸ºå®ä½“ç±»æŒ‡å®šè¡¨å</p>
                <div class="api-signature">
[TableName("custom_users")]
public class User
{
    public int Id { get; set; }
    public string Name { get; set; }
}
                </div>
            </div>
        </div>

        <!-- å ä½ç¬¦ API -->
        <div class="api-section">
            <h2>ğŸ“ å ä½ç¬¦ç³»ç»Ÿ</h2>
            
            <table class="param-table">
                <tr>
                    <th>å ä½ç¬¦</th>
                    <th>è¯´æ˜</th>
                    <th>ç¤ºä¾‹è¾“å‡º</th>
                </tr>
                <tr>
                    <td><code>{{table}}</code></td>
                    <td>è¡¨å</td>
                    <td><code>users</code></td>
                </tr>
                <tr>
                    <td><code>{{columns}}</code></td>
                    <td>æ‰€æœ‰åˆ—å</td>
                    <td><code>id, name, email</code></td>
                </tr>
                <tr>
                    <td><code>{{columns --exclude Id}}</code></td>
                    <td>æ’é™¤æŒ‡å®šåˆ—</td>
                    <td><code>name, email</code></td>
                </tr>
                <tr>
                    <td><code>{{values}}</code></td>
                    <td>å‚æ•°å ä½ç¬¦</td>
                    <td><code>@Name, @Email</code></td>
                </tr>
                <tr>
                    <td><code>{{set}}</code></td>
                    <td>UPDATE SETå­å¥</td>
                    <td><code>name=@Name, email=@Email</code></td>
                </tr>
                <tr>
                    <td><code>{{orderby col --desc}}</code></td>
                    <td>æ’åº</td>
                    <td><code>ORDER BY col DESC</code></td>
                </tr>
            </table>
        </div>

        <!-- Partial æ–¹æ³• -->
        <div class="api-section">
            <h2>ğŸ”§ Partial æ–¹æ³•</h2>
            
            <div class="api-item">
                <h3>OnExecuting</h3>
                <p>SQLæ‰§è¡Œå‰æ‹¦æˆª</p>
                <div class="api-signature">
partial void OnExecuting(string operation, IDbCommand command);
                </div>
                <table class="param-table">
                    <tr>
                        <th>å‚æ•°</th>
                        <th>è¯´æ˜</th>
                    </tr>
                    <tr>
                        <td>operation</td>
                        <td>æ“ä½œåç§°ï¼ˆæ–¹æ³•åï¼‰</td>
                    </tr>
                    <tr>
                        <td>command</td>
                        <td>DbCommandå¯¹è±¡ï¼Œå¯ä¿®æ”¹SQLå’Œå‚æ•°</td>
                    </tr>
                </table>
            </div>

            <div class="api-item">
                <h3>OnExecuted</h3>
                <p>SQLæ‰§è¡ŒæˆåŠŸåæ‹¦æˆª</p>
                <div class="api-signature">
partial void OnExecuted(string operation, IDbCommand command, 
                        object? result, long elapsedTicks);
                </div>
            </div>

            <div class="api-item">
                <h3>OnExecuteFail</h3>
                <p>SQLæ‰§è¡Œå¤±è´¥æ—¶æ‹¦æˆª</p>
                <div class="api-signature">
partial void OnExecuteFail(string operation, IDbCommand command, 
                           Exception ex, long elapsedTicks);
                </div>
            </div>
        </div>

        <p style="text-align: center; margin-top: 3rem;">
            <a href="index.html" style="color: var(--primary-color); text-decoration: none;">â† è¿”å›é¦–é¡µ</a>
        </p>
    </div>
</body>
</html>

